---
name: Build Docker Hub image
description:
  Builds docker image that is pushed to Docker Hub, which does not have bash script as
  entrypoint, just aleph-node.

inputs:
  source-image:
    description: Source aleph-node image
    required: true
  target-image:
    description: Image to build
    required: true

runs:
  using: composite
  steps:
    - name: Build Docker Hub image
      run: |
        echo "FROM ${{ inputs.source-image }}" > Dockerfile.dockerhub
        echo 'ENTRYPOINT ["/usr/local/bin/aleph-node"]' >> Dockerfile.dockerhub
        docker build -t "${{ inputs.target-image }}" -f Dockerfile.dockerhub .
