---
# This workflow performs sync to Mainnet from a pruned ParityDB snapshot using the latest main version.

name: Weekly sync from snapshot, Mainnet, ParityDB pruned
on:
  # At 03:00 on Tuesday
  schedule:
    - cron: '0 3 * * 2'
  workflow_dispatch:
  # testing, remove before merge
  push:
    branches:
      - A0-4265

concurrency:
  group: ${{ github.ref }}-${{ github.workflow }}
  cancel-in-progress: false

jobs:
  main:
    name: Test sync
    uses: ./.github/workflows/_weekly-sync-from-snapshot.yml
    secrets: inherit
    with:
      timeout: 110
      args: --mainnet --pruned
