---
# This workflow checks build of aleph-node feature liminal enabled
name: Build liminal node
on:
  workflow_call:

jobs:
  main:
    name: Check build of liminal node
    runs-on: self-hosted
    steps:
      - name: Checkout aleph-node source code
        uses: actions/checkout@v3

      - name: Install Rust toolchain
        uses: actions-rs/toolchain@v1

      - name: Install WASM target
        run: rustup target add wasm32-unknown-unknown

      - name: Build liminal binary and runtime
        run: |
          cargo check --release -p aleph-node --features "liminal"
