---
# This workflow checks build of aleph-node and aleph-runtime with feature liminal
name: Build liminal node and runtime
on:
  workflow_call:

jobs:
  main:
    name: Build test node and runtime
    runs-on: ubuntu-20.04
    steps:
      - name: Checkout aleph-node source code
        uses: actions/checkout@v3

      - name: Call action get-ref-properties
        id: get-ref-properties
        uses: ./.github/actions/get-ref-properties

      - name: Install Rust toolchain
        uses: actions-rs/toolchain@v1

      - name: Install WASM target
        run: rustup target add wasm32-unknown-unknown

      - name: Build liminal binary and runtime
        run: |
          cargo check --release -p aleph-node --features "liminal"
