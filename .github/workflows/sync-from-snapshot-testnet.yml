---
# This workflow performs sync to Testnet from a RocksDB snapshot using the latest
# main version.

name: Sync from snapshot test, Testnet, RocksDB
on:
  # At 00:00 on Wednesday and Saturday
  schedule:
    - cron: '0 1 * * 3,6'
  workflow_dispatch:
  push:
    branches:
      - A0-4265-non-parity-db-tests

concurrency:
  group: ${{ github.ref }}-${{ github.workflow }}
  cancel-in-progress: false

jobs:
  main:
    name: Test sync
    uses: ./.github/workflows/_sync-from-snapshot.yml
    secrets: inherit
    with:
      # maximum possible time allowed by GH (6h), minus 15 minutes for eventually cleanup
      timeout: 585
      args: --testnet
