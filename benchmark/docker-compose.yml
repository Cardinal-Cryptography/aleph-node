version: '3.2'

services:
  prometheus:
    build:
      context: .
      dockerfile: Dockerfile_prometheus
    extra_hosts:
      - host.docker.internal:host-gateway
    volumes:
      - ${PROMETHEUS_YAML:-./prometheus.yml}:/etc/prometheus/prometheus.yml

  grafana:
    image: grafana/grafana:8.2.1
    ports:
      - ${GRAFANA_PORT:-3000}:3000
    volumes:
      - ./provisioning:/etc/grafana/provisioning
      - ./grafana.ini:/etc/grafana/grafana.ini
